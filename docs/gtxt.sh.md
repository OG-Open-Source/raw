# Random Text Generator by OG-Open-Source

## 1. 功能概述
- 生成指定字數的隨機文字
- 支援命令列參數和互動式輸入
- 輸出到指定檔案
- 顯示執行時間統計
- 使用高效能的隨機生成方法

## 2. 使用方法
### 2.1 基本語法
```bash
# 命令列模式
bash gtxt.sh [字數]

# 互動式模式
bash gtxt.sh
```

### 2.2 參數說明
- `[字數]`: 可選參數,指定要生成的字數
  - 必須為正整數
  - 如未指定則進入互動式模式

### 2.3 輸出
- 預設輸出檔案: `text.txt`
- 輸出內容: 隨機英文字母和數字
- 檔案結尾會自動加入換行符號

## 3. 使用範例
### 3.1 命令列模式
```bash
# 生成 1000 個字元
bash gtxt.sh 1000

# 生成 1MB 的文字(約 1048576 字元)
bash gtxt.sh 1048576
```

### 3.2 互動式模式
```bash
$ bash gtxt.sh
請輸入要生成的字數: 500
已成功生成 500 字的隨機文字到檔案 text.txt 中。
執行時間: .123456 秒
```

## 4. 技術細節
### 4.1 隨機生成方法
```bash
# 使用 /dev/urandom 作為隨機源
# 使用 tr 過濾出所需字元
< /dev/urandom LC_ALL=C tr -dc 'a-zA-Z0-9'
```

### 4.2 效能優化
- 使用 LC_ALL=C 提升字元處理效能
- 直接重導向輸出而非使用迴圈
- 使用 head -c 限制輸出大小

### 4.3 時間計算
```bash
# 使用 date 的奈秒精度
start_time=$(date +%s.%N)
end_time=$(date +%s.%N)
execution_time=$(echo "$end_time - $start_time" | bc)
```

## 5. 錯誤處理
### 5.1 輸入驗證
```bash
# 檢查命令列參數
if [ $# -eq 1 ] && [[ $1 =~ ^[0-9]+$ ]]; then
    # 有效的數字參數
else
    # 進入互動式模式
fi

# 互動式輸入驗證
while true; do
    read -p "請輸入要生成的字數: " word_count
    if [[ $word_count =~ ^[0-9]+$ ]] && [ $word_count -gt 0 ]; then
        break
    fi
    echo "輸入無效，請輸入數字。"
done
```

### 5.2 檔案操作檢查
```bash
# 檢查檔案是否成功生成
if [ -f "$output_file" ]; then
    # 成功
else
    # 失敗
    exit 1
fi
```

## 6. 注意事項
1. 執行環境需求:
   - 需要 Bash Shell
   - 需要 /dev/urandom 裝置
   - 需要 tr 命令
   - 需要 bc 命令(用於時間計算)

2. 檔案系統:
   - 需要目標目錄的寫入權限
   - 如果輸出檔案已存在會被覆蓋

3. 記憶體使用:
   - 不會將全部內容載入記憶體
   - 使用串流處理方式
   - 適合生成大檔案

4. 效能考量:
   - 生成速度與系統效能相關
   - 檔案系統效能會影響寫入速度
   - 建議對大檔案使用 SSD 儲存

5. 字元集限制:
   - 僅生成 a-z, A-Z, 0-9
   - 不包含特殊字元
   - 不包含空格和換行

## 7. 範例輸出
```
# 檔案內容範例(10字元)
Hs7kD9fM2p

# 執行結果範例
已成功生成 1000 字的隨機文字到檔案 text.txt 中。
執行時間: 0.004567 秒
``` 